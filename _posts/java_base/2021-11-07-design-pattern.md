---
layout: post
title: 设计模式介绍
category: java
tags: [java]
---

设计模式介绍

## 参考资料
- [Java开发中的23种设计模式详解(转)](http://www.cnblogs.com/maowang1991/archive/2013/04/15/3023236.html)
- https://www.cnblogs.com/MJyc/p/10410327.html

## 一、对象间关系
接触设计模式之前一定先清楚类之间的关系和设计，也就是我们常说的UML类图和类设计。    
想想自己在日常开发中有为了应对变化而对类做了什么处理吗？你的类是不是一个高内聚单一职责的呢？类之间的有没有强耦合关系？有没有面向接口，面向日志编程呢？

既然是面向对象，那么对象之间有什么关系呢？也就引申出我们的UML类图，为了更清晰的表达类与类之间的复杂的关系（能用图解决的事情尽量避免文字），说是复杂也是复杂在类之间的组合上，单纯的类之间的关系，无非就以下几种  
依赖, 关联, 聚合, 组合, 继承, 实现。其中关联关系由强到弱为：组合 > 聚合 > 关联 > 依赖。再复杂的类图也无非这几种关系去表达，常见的类图结构中也就三种关系：继承，实现，关联（组合>聚合>关联>依赖） 

### 1.1 UML图示例
- 依赖(use a)  
对象间最弱的一种关系，临时性的关联。代码中一般指由局部变量、函数参数、返回值建立的对于其他对象的调用关系  
![](../../assets/images/2021/java/d1.jpeg)  

- 关联(1..1    1..N    n ..1)(has a)   
对象间的一种引用关系，代码中指一个对象中长期引用另一个类的对象  
关联关系中的两个类完全相互独立。可以是一对一、一对多、多对一。  
比如：厨师和刀的关系，厨师切菜其实是刀切菜，厨师可以使用多把刀，每把刀也可以给多个厨师使用。  
![](../../assets/images/2021/java/d2.jpeg) 

- 聚合（owns a）  
聚合是关联关系的一种。聚合表述的是整体和个之间的关系。个体可以单独存在  
比如：厨师组与厨师，厨师组由多个厨师组成，厨师组、每一个厨师也可以单独存在。  
![](../../assets/images/2021/java/d3.jpeg) 

- 组合（is a part of）  
组合也是关联关系的一种。它是比聚合关系更强的关系，表述个体和局部之间的关系。局部不能单独存在；  
组合关系代表一种“is-a”的关系。不仅强调整体与部分之间的关系，而且代表整体的对象也要对部分的生命周期负责，组合关系不能共享，如果代表整体的对象被销毁，那么部分也会被销毁。
举例如：人体和器官  
![](../../assets/images/2021/java/d4.jpeg) 

- 实现（implement）    
![](../../assets/images/2021/java/d5.jpeg) 

- 继承(泛化)    
![](../../assets/images/2021/java/d6.jpeg) 

### 1.2 代码示例
``` 
1.继承(泛化)关系
1）.文字描述
　　一个类或者接口继承了另一个类或者接口，增加了在原有的方法和属性上增加了新的方法和属性。
2）.代码表示
　　class A{}
　　class B extends A{}//B继承了A中的所有的方法和属性，对于私有的方法和属性，子类只能是拥有，但无法直接使用。

2.实现关系
1）.文字描述
　　一个class类实现了interface接口
2）.代码表示
　　interface A{}
　　class B implements A{}//类B实现了接口A，使用关键自implements，接口和接口的继承实用的是extends

3.依赖关系
1）.文字描述
　　依赖关系表示一个类依赖于另一个类的定义，一般依赖关系在java中提现为局部变量、方法的形参，或者对静态方法的调用，这是一种弱关系。
2）.代码描述
　　class A{}
　　class B{
　　　　public void abc(A a){}//在B类中的没有A的属性，而是以形参的方式引入
　　}

4.关联关系
1）.文字描述
　　一般以类的属性形式出现在关联类中，在java中关联关系一般使用成员变量来实现。又分为聚合关系和组合关系。
2）.代码描述
　　class A{}
　　class B{
　　　　A a;//成员变量引入了A类
　　}

5.聚合关系
1）.文字描述
　　聚合关系 has a,关联关系较弱,后期使用不会因为对象的删除而删除
2）.代码描述
　　class A{}
　　class B{
　　　　A a;//成员变量引入了A类
　　　　B(A a){
　　　　　　this.a = a;
　　　　}
　　}

6.组合关系
1）文字描述
　　组合关系 contains a，关联关系较强，整体和部分是不可分割的，他们又共同的生命周期。
2）代码描述
　　class A{}
　　class B{
　　　　A a;//成员变量引入了A类
　　　　B(){
　　　　　　this.a = new A();
　　　　}
　　}
```

## 二、设计模式
### 2.1 设计模式的分类 （总体来说设计模式分为三大类）
- 创建型模式：对象实例化的模式，创建型模式用于解耦对象的实例化过程。
    - 单例模式：某个类只能有一个实例，提供一个全局的访问点。
    - 简单工厂：一个工厂类根据传入的参量决定创建出那一种产品类的实例。
    - 工厂方法：定义一个创建对象的接口，让子类决定实例化那个类。
    - 抽象工厂：创建相关或依赖对象的家族，而无需明确指定具体类。
    - 建造者模式：封装一个复杂对象的构建过程，并可以按步骤构造。
    - 原型模式：通过复制现有的实例来创建新的实例。
- 结构型模式：把类或对象结合在一起形成一个更大的结构。关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式
    - 适配器模式：将一个类的方法接口转换成客户希望的另外一个接口。
    - 组合模式：将对象组合成树形结构以表示“”部分-整体“”的层次结构。
    - 装饰模式：动态的给对象添加新的功能。
    - 代理模式：为其他对象提供一个代理以便控制这个对象的访问。
    - 亨元（蝇量）模式：通过共享技术来有效的支持大量细粒度的对象。
    - 外观模式：对外提供一个统一的方法，来访问子系统中的一群接口。
    - 桥接模式：将抽象部分和它的实现部分分离，使它们都可以独立的变化。
- 行为型模式：关注对象之间的通信，类和对象如何交互，及划分责任和算法。
    - 模板模式：定义一个算法结构，而将一些步骤延迟到子类实现。
    - 解释器模式：给定一个语言，定义它的文法的一种表示，并定义一个解释器。
    - 策略模式：定义一系列算法，把他们封装起来，并且使它们可以相互替换。
    - 状态模式：允许一个对象在其对象内部状态改变时改变它的行为。
    - 观察者模式：对象间的一对多的依赖关系。
    - 备忘录模式：在不破坏封装的前提下，保持对象的内部状态。
    - 中介者模式：用一个中介对象来封装一系列的对象交互。
    - 命令模式：将命令请求封装为一个对象，使得可以用不同的请求来进行参数化。
    - 访问者模式：在不改变数据结构的前提下，增加作用于一组对象元素的新功能。
    - 责任链模式：将请求的发送者和接收者解耦，使的多个对象都有处理这个请求的机会。
    - 迭代器模式：一种遍历访问聚合对象中各个元素的方法，不暴露该对象的内部结构
 
![](../../assets/images/2021/java/d-fl.png)  

![](../../assets/images/2021/java/d-fl2.png)  

![](../../assets/images/2021/java/d-fl3.png)  

![](../../assets/images/2021/java/d-fl4.png)  

## 三、设计模式之禅-总结
![](../../assets/images/2021/java/dp-c.png)

![](../../assets/images/2021/java/dp-s.png)

## 设计模式学习心得  
- 1、刚接触设计模式学习的话一阶段一定先理解设计模式的概念以及应用场景、优缺点、和UML、实现简单Demo入手。
- 2、学习过程中可以结合着spring和java的设计理念一起学习，既掌握了一些框架中的典型应用场景又加深了设计模式的理解，一举两得
- 3、二阶段的话在日常开发过程中和实际业务结合尝试加入你的设计，哪怕只是开发一个很小的模块也可以有你设计的思想，只有真正和实际项目结合才能让你对设计的理解更加深入
- 4、设计是一个迭代的过程，版本迭代也是考验设计良好性的过程。有的设计模式在项目启动的时候就要考虑，有的是在系统升级的时候考虑，勿要在系统启动之初过度设计
- 5、设计模式在一定程度上是增加了系统的复杂度，考虑到系统的扩展性，必然也有所牺牲，在真正使用的时候一定衡量你能给项目带来的是否利大于弊

